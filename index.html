<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar Chart Race - Elecciones España</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* --- Transiciones Suaves --- */
        .bar-transition {
            transition-property: top, width, opacity, background-color;
            transition-timing-function: linear;
        }
        
        /* --- Scrollbar Oculta --- */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* --- NUEVA ANIMACIÓN DE FONDO VIBRANTE --- */
        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Fondo Oscuro Tech (Cuerpo de la página) */
        .tech-bg-dark {
            background-color: #0f172a;
            background-image: radial-gradient(#312e81 1px, transparent 1px), radial-gradient(#312e81 1px, #0f172a 1px);
            background-size: 40px 40px;
            background-position: 0 0, 20px 20px;
        }

        /* Fondo VISUALMENTE ATRACTIVO (Interior del móvil) */
        .visual-bg-vibrant {
            /* Bandera abstracta / Tonos electorales */
            background: linear-gradient(-45deg, #FF3CAC, #2B86C5, #784BA0, #FF3CAC);
            background-size: 400% 400%;
            animation: gradient-flow 15s ease infinite;
        }
    </style>
</head>
<body class="min-h-screen tech-bg-dark text-slate-100 font-sans py-8 px-4 flex flex-col items-center justify-center">

    <!-- Header -->
    <div class="w-full max-w-[400px] mb-4 flex justify-between items-center pb-2 z-10">
        <h1 class="text-xl font-bold text-slate-100 drop-shadow-md tracking-wide">Bar Chart Race</h1>
        <button id="toggle-editor-btn" class="flex items-center gap-2 text-xs text-indigo-100 hover:text-white transition-colors font-medium bg-slate-800/50 backdrop-blur-md px-3 py-2 rounded-lg border border-slate-700/50">
            <i data-lucide="settings" class="w-3.5 h-3.5"></i>
            <span id="editor-btn-text">Datos</span>
        </button>
    </div>

    <!-- Editor Modal -->
    <div id="editor-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
        <div class="w-full max-w-4xl bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden animate-in fade-in zoom-in duration-300 max-h-[90vh] flex flex-col text-slate-800">
            <div class="p-4 bg-indigo-900 text-white flex justify-between items-center shrink-0">
                <h3 class="font-bold flex items-center gap-2"><i data-lucide="settings" class="w-5 h-5"></i> Configuración</h3>
                <button id="close-editor-btn" class="hover:text-indigo-200 text-xl font-bold">&times;</button>
            </div>
            <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6 overflow-y-auto">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-1">Título</label>
                        <input type="text" id="input-title" class="w-full border border-slate-300 rounded p-2 outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-1">Subtítulo</label>
                        <input type="text" id="input-subtitle" class="w-full border border-slate-300 rounded p-2 outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div class="bg-blue-50 p-4 rounded text-sm text-blue-800">
                        <p class="font-bold mb-1">Nota:</p>
                        <p>Usa formato JSON. La app interpolará los años automáticamente.</p>
                    </div>
                </div>
                <div class="flex flex-col h-full min-h-[300px]">
                    <label class="block text-sm font-semibold text-slate-700 mb-1">JSON</label>
                    <textarea id="input-json" class="flex-grow w-full border border-slate-300 rounded p-2 font-mono text-xs focus:ring-2 focus:ring-indigo-500 outline-none resize-none"></textarea>
                    <p id="error-msg" class="text-red-500 text-sm mt-2 hidden"></p>
                    <button id="save-data-btn" class="mt-4 bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700 transition flex justify-center items-center gap-2">
                        <i data-lucide="save" class="w-4 h-4"></i> Actualizar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Visualization Area (9:16 Aspect Ratio) -->
    <div class="w-full max-w-[400px] aspect-[9/16] visual-bg-vibrant rounded-[2.5rem] shadow-2xl overflow-hidden relative border-8 border-slate-900 ring-4 ring-slate-800/50">
        
        <!-- Internal Header -->
        <div class="absolute top-5 left-0 right-0 px-8 py-6 z-20 pointer-events-none flex justify-end">
            <span id="year-display" class="text-7xl font-black text-white/90 tracking-tighter transition-all duration-300 drop-shadow-lg" style="text-shadow: 0 4px 12px rgba(0,0,0,0.2);">1996</span>
        </div>

        <!-- Background Title -->
        <div class="absolute bottom-24 left-6 right-6 select-none pointer-events-none z-0 text-right">
            <h2 id="chart-title" class="text-3xl font-black text-white leading-tight drop-shadow-md">Elecciones Generales</h2>
            <p id="chart-subtitle" class="text-lg text-white/80 font-medium drop-shadow-sm">Votos totales en España</p>
        </div>

        <!-- Chart Area Container -->
        <div id="chart-container" class="relative w-full h-full px-6 pb-4 pt-36 z-10 box-border">
            <!-- Bars injected here -->
        </div>

        <!-- Timeline Slider -->
        <div class="absolute bottom-0 left-0 right-0 bg-black/20 backdrop-blur-lg p-4 border-t border-white/20 z-30 pb-6">
            <div class="flex items-center justify-between mb-2">
                 <span id="current-year-mini" class="text-xs font-bold text-white">1996</span>
                 <span id="end-year-mini" class="text-xs font-bold text-white/70">2023</span>
            </div>
            <input type="range" id="timeline-slider" min="0" value="0" class="w-full h-1.5 bg-white/30 rounded-lg appearance-none cursor-pointer accent-white block">
        </div>
    </div>

    <!-- Control Panel -->
    <div class="w-full max-w-[400px] mt-8 flex justify-between items-center bg-slate-800/80 backdrop-blur-xl p-4 rounded-2xl shadow-xl border border-slate-700/50 z-10">
        <button id="reset-btn" class="p-3 rounded-full hover:bg-white/10 text-slate-300 transition" title="Reiniciar">
            <i data-lucide="rotate-ccw" class="w-5 h-5"></i>
        </button>

        <button id="play-pause-btn" class="bg-white text-indigo-600 hover:bg-indigo-50 rounded-full p-4 shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-transform active:scale-95 flex items-center justify-center w-16 h-16 -mt-8 border-4 border-slate-900">
            <i id="play-icon" data-lucide="play" class="w-8 h-8 ml-1 fill-current"></i>
            <i id="pause-icon" data-lucide="pause" class="w-8 h-8 fill-current hidden"></i>
        </button>

        <div class="flex flex-col items-end">
            <span class="text-[10px] uppercase font-bold text-slate-400 mb-1">Velocidad</span>
            <div class="flex items-center gap-2 bg-slate-900/50 px-3 py-1 rounded-lg border border-slate-700">
                <i data-lucide="fast-forward" class="w-3.5 h-3.5 text-slate-300"></i>
                <select id="speed-select" class="bg-transparent text-xs font-semibold text-slate-200 outline-none cursor-pointer w-20 border-none focus:ring-0">
                    <option value="40" class="bg-slate-900">Lento</option>
                    <option value="20" class="bg-slate-900" selected>Fluido</option>
                    <option value="10" class="bg-slate-900">Rápido</option>
                </select>
            </div>
        </div>
    </div>

    <script>
        // --- COLORES CORPORATIVOS ---
        const PARTY_COLORS = {
            "PP": "#0056A7",
            "PSOE": "#E30613",
            "VOX": "#63BE21",
            "SUMAR": "#E51C55",
            "PODEMOS": "#6B1F5F",
            "UNIDAS PODEMOS": "#6B1F5F",
            "IU": "#D20000",
            "CS": "#EB6109",
            "CIU": "#003268",
            "JUNTS": "#00C3B2",
            "ERC": "#FFB232",
            "PNV": "#008000",
            "UPYD": "#E9007E",
            "BNG": "#76B3DD",
            "CC": "#FFD700",
            "EH BILDU": "#96C400"
        };

        const PARTY_LOGOS = {
            "PP": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/People%27s_Party_%28Spain%29_Logo_%282019%29.svg/200px-People%27s_Party_%28Spain%29_Logo_%282019%29.svg.png",
            "PSOE": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Logotipo_del_PSOE.svg/200px-Logotipo_del_PSOE.svg.png",
            "VOX": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Vox_logo.svg/200px-Vox_logo.svg.png",
            "SUMAR": "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Logotipo_de_Sumar.svg/200px-Logotipo_de_Sumar.svg.png",
            "PODEMOS": "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Podemos_texto.svg/200px-Podemos_texto.svg.png",
            "UNIDAS PODEMOS": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Unidas_Podemos_logo.svg/200px-Unidas_Podemos_logo.svg.png",
            "CS": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Ciudadanos-Cs.svg/200px-Ciudadanos-Cs.svg.png",
            "ERC": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Esquerra_Republicana_de_Catalunya_logo.svg/200px-Esquerra_Republicana_de_Catalunya_logo.svg.png",
            "IU": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Izquierda_Unida_logo_2022.svg/200px-Izquierda_Unida_logo_2022.svg.png",
            "PNV": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/EAJ-PNV_Logo.svg/200px-EAJ-PNV_Logo.svg.png"
        };

        // --- DATOS REALES ELECCIONES ESPAÑA ---
        const INITIAL_DATA = {
            "1996": [
                { name: "PP", value: 9716006 },
                { name: "PSOE", value: 9425678 },
                { name: "IU", value: 2639774 },
                { name: "CIU", value: 1151633 },
                { name: "PNV", value: 318951 },
                { name: "CC", value: 220418 },
                { name: "BNG", value: 220147 }
            ],
            "2000": [
                { name: "PP", value: 10321178 },
                { name: "PSOE", value: 7918752 },
                { name: "IU", value: 1263043 },
                { name: "CIU", value: 970421 },
                { name: "PNV", value: 353953 },
                { name: "BNG", value: 306268 }
            ],
            "2004": [
                { name: "PSOE", value: 11026163 },
                { name: "PP", value: 9763144 },
                { name: "IU", value: 1284081 },
                { name: "CIU", value: 835471 },
                { name: "ERC", value: 652196 },
                { name: "PNV", value: 420980 }
            ],
            "2008": [
                { name: "PSOE", value: 11289335 },
                { name: "PP", value: 10278010 },
                { name: "IU", value: 969946 },
                { name: "CIU", value: 779425 },
                { name: "PNV", value: 306128 },
                { name: "UPYD", value: 306079 }
            ],
            "2011": [
                { name: "PP", value: 10866566 },
                { name: "PSOE", value: 7003511 },
                { name: "IU", value: 1685991 },
                { name: "UPYD", value: 1143225 },
                { name: "CIU", value: 1015691 },
                { name: "AMAIUR", value: 334498 },
                { name: "PNV", value: 324317 }
            ],
            "2015": [
                { name: "PP", value: 7236965 },
                { name: "PSOE", value: 5545315 },
                { name: "PODEMOS", value: 5189463 },
                { name: "CS", value: 3514528 },
                { name: "IU", value: 926783 },
                { name: "ERC", value: 601782 },
                { name: "DL", value: 567253 },
                { name: "PNV", value: 302316 }
            ],
            "2016": [
                { name: "PP", value: 7941236 },
                { name: "PSOE", value: 5443846 },
                { name: "UNIDAS PODEMOS", value: 5087538 },
                { name: "CS", value: 3141570 },
                { name: "ERC", value: 632234 },
                { name: "CDC", value: 483488 },
                { name: "PNV", value: 287014 }
            ],
            "2019.3": [
                { name: "PSOE", value: 7513142 },
                { name: "PP", value: 4373653 },
                { name: "CS", value: 4155665 },
                { name: "UNIDAS PODEMOS", value: 3751145 },
                { name: "VOX", value: 2688092 },
                { name: "ERC", value: 1020392 },
                { name: "JUNTS", value: 500787 },
                { name: "PNV", value: 395884 }
            ],
            "2019.9": [
                { name: "PSOE", value: 6792199 },
                { name: "PP", value: 5047040 },
                { name: "VOX", value: 3656979 },
                { name: "UNIDAS PODEMOS", value: 3119364 },
                { name: "CS", value: 1650318 },
                { name: "ERC", value: 874859 },
                { name: "JUNTS", value: 530225 },
                { name: "PNV", value: 379002 }
            ],
            "2023": [
                { name: "PP", value: 8091840 },
                { name: "PSOE", value: 7760970 },
                { name: "VOX", value: 3033744 },
                { name: "SUMAR", value: 3014006 },
                { name: "ERC", value: 462883 },
                { name: "JUNTS", value: 392634 },
                { name: "EH BILDU", value: 333362 },
                { name: "PNV", value: 275782 }
            ]
        };

        // Global State
        let rawData = INITIAL_DATA;
        let denseData = {};
        let timeline = [];
        let currentIndex = 0;
        let isPlaying = false;
        
        let frameDuration = 20; 
        let animationStep = 0.01; 

        let intervalId = null;
        let chartTitle = "Elecciones Generales";
        let chartSubtitle = "Votos totales en España";
        
        // DOM Elements
        const els = {
            chartContainer: document.getElementById('chart-container'),
            yearDisplay: document.getElementById('year-display'),
            timelineSlider: document.getElementById('timeline-slider'),
            currentYearMini: document.getElementById('current-year-mini'),
            endYearMini: document.getElementById('end-year-mini'),
            playPauseBtn: document.getElementById('play-pause-btn'),
            playIcon: document.getElementById('play-icon'),
            pauseIcon: document.getElementById('pause-icon'),
            resetBtn: document.getElementById('reset-btn'),
            speedSelect: document.getElementById('speed-select'),
            toggleEditorBtn: document.getElementById('toggle-editor-btn'),
            closeEditorBtn: document.getElementById('close-editor-btn'),
            editorModal: document.getElementById('editor-modal'),
            inputTitle: document.getElementById('input-title'),
            inputSubtitle: document.getElementById('input-subtitle'),
            inputJson: document.getElementById('input-json'),
            saveDataBtn: document.getElementById('save-data-btn'),
            errorMsg: document.getElementById('error-msg'),
            titleDisplay: document.getElementById('chart-title'),
            subtitleDisplay: document.getElementById('chart-subtitle')
        };

        const barElements = {};
        const ROW_HEIGHT = 58;
        const OFFSET_TOP = 150;

        // --- UTILS ---
        const getPartyColor = (name) => {
            if (PARTY_COLORS[name]) return PARTY_COLORS[name];
            // Fallback: generar color si no está definido
            let hash = 0;
            for (let i = 0; i < name.length; i++) hash = name.charCodeAt(i) + ((hash << 5) - hash);
            const h = Math.abs(hash % 360);
            return `hsl(${h}, 70%, 50%)`;
        };

        const getPartyLogo = (name) => {
            return PARTY_LOGOS[name] || null;
        };

        const interpolateData = (data, step) => {
            const years = Object.keys(data).map(Number).sort((a, b) => a - b);
            const minYear = years[0];
            const maxYear = years[years.length - 1];
            const interpolated = {};

            const allCompanies = new Set();
            Object.values(data).forEach(yearList => {
                yearList.forEach(item => allCompanies.add(JSON.stringify({ name: item.name })));
            });
            const companiesList = Array.from(allCompanies).map(c => JSON.parse(c));

            const getValue = (year, name) => {
                // Handle near matches for floating point keys
                const key = Object.keys(data).find(k => Math.abs(parseFloat(k) - year) < 0.001);
                const list = data[key];
                if (!list) return 0;
                const item = list.find(i => i.name === name);
                return item ? item.value : 0;
            };

            for (let y = minYear; y <= maxYear; y += step) {
                const currentYearKey = y.toFixed(2); 
                const prevKeyYear = years.filter(year => year <= y).pop();
                const nextKeyYear = years.find(year => year > y) || prevKeyYear;

                const frameItems = companiesList.map(company => {
                    const startVal = getValue(prevKeyYear, company.name);
                    const endVal = getValue(nextKeyYear, company.name);
                    
                    let currentVal;
                    if (prevKeyYear === nextKeyYear) {
                        currentVal = startVal;
                    } else {
                        const progress = (y - prevKeyYear) / (nextKeyYear - prevKeyYear);
                        currentVal = startVal + (endVal - startVal) * progress;
                    }

                    if (currentVal <= 0 && endVal <= 0) return null;

                    return { name: company.name, value: currentVal };
                }).filter(Boolean);

                interpolated[currentYearKey] = frameItems;
            }
            return interpolated;
        };

        // --- CORE LOGIC ---

        function initData() {
            denseData = interpolateData(rawData, animationStep);
            timeline = Object.keys(denseData).sort((a, b) => parseFloat(a) - parseFloat(b));
            
            els.timelineSlider.max = timeline.length - 1;
            els.endYearMini.innerText = Math.floor(parseFloat(timeline[timeline.length - 1]));
            els.inputTitle.value = chartTitle;
            els.inputSubtitle.value = chartSubtitle;
            els.inputJson.value = JSON.stringify(rawData, null, 2);
            els.titleDisplay.innerText = chartTitle;
            els.subtitleDisplay.innerText = chartSubtitle;
        }

        function renderFrame() {
            const currentKey = timeline[currentIndex];
            if (!currentKey) return; 
            
            const items = [...denseData[currentKey]].sort((a, b) => b.value - a.value);
            const maxValue = items.length > 0 ? items[0].value : 1;

            els.yearDisplay.innerText = Math.floor(parseFloat(currentKey));
            els.currentYearMini.innerText = Math.floor(parseFloat(currentKey));
            els.timelineSlider.value = currentIndex;

            // Top 10 items
            const activeItems = items.slice(0, 10).map((item, index) => ({
                ...item,
                rank: index,
                barWidth: (item.value / maxValue) * 100,
                color: getPartyColor(item.name),
                image: getPartyLogo(item.name)
            }));

            const activeNames = new Set(activeItems.map(i => i.name));

            activeItems.forEach(item => {
                let el = barElements[item.name];
                
                if (!el) {
                    el = document.createElement('div');
                    el.className = "absolute left-6 right-6 flex items-center bar-transition";
                    el.style.transitionDuration = `${frameDuration}ms`;
                    
                    el.innerHTML = `
                        <div class="absolute -top-5 left-0 text-xs font-bold text-white drop-shadow-md truncate max-w-[200px] shadow-black">${item.name}</div>
                        <div class="w-full h-10 relative flex items-center">
                            <div class="bar-fill h-full rounded-r-full shadow-lg flex items-center pl-2 overflow-visible whitespace-nowrap relative bar-transition border border-white/40" style="transition-duration: ${frameDuration}ms;">
                                <img src="" class="party-logo w-8 h-8 rounded-full absolute -right-4 border-2 border-white shadow-sm z-10 bg-white object-contain p-0.5 hidden">
                            </div>
                            <span class="value-label ml-2 text-sm font-bold text-indigo-900 tabular-nums z-20 shadow-lg bg-white/90 backdrop-blur-sm px-2 py-0.5 rounded-full border border-white/40">0</span>
                        </div>
                    `;
                    els.chartContainer.appendChild(el);
                    barElements[item.name] = el;
                }

                el.style.transitionDuration = `${frameDuration}ms`;
                el.querySelector('.bar-fill').style.transitionDuration = `${frameDuration}ms`;

                el.style.top = `${(item.rank * ROW_HEIGHT) + OFFSET_TOP}px`;
                el.style.opacity = '1';
                
                const barFill = el.querySelector('.bar-fill');
                barFill.style.width = `${Math.max(item.barWidth, 1)}%`;
                barFill.style.backgroundColor = item.color;
                barFill.style.backgroundImage = "linear-gradient(to bottom, rgba(255,255,255,0.3), rgba(0,0,0,0.1))";

                // Update Image
                const imgEl = el.querySelector('.party-logo');
                if (item.image) {
                    imgEl.src = item.image;
                    imgEl.classList.remove('hidden');
                } else {
                    imgEl.classList.add('hidden');
                }

                const valLabel = el.querySelector('.value-label');
                valLabel.innerText = Math.round(item.value).toLocaleString();
            });

            // Hide inactive
            Object.keys(barElements).forEach(name => {
                if (!activeNames.has(name)) {
                    const el = barElements[name];
                    el.style.opacity = '0';
                    el.style.top = '600px'; 
                }
            });
        }

        function startGameLoop() {
            if (intervalId) clearInterval(intervalId);
            intervalId = setInterval(() => {
                if (currentIndex < timeline.length - 1) {
                    currentIndex++;
                    renderFrame();
                } else {
                    pauseGame();
                }
            }, frameDuration);
        }

        function pauseGame() {
            isPlaying = false;
            clearInterval(intervalId);
            updatePlayButton();
        }

        function updatePlayButton() {
            if (isPlaying) {
                els.playIcon.classList.add('hidden');
                els.pauseIcon.classList.remove('hidden');
            } else {
                els.playIcon.classList.remove('hidden');
                els.pauseIcon.classList.add('hidden');
            }
        }

        function updateTransitionSpeed() {
             Object.values(barElements).forEach(el => {
                 el.style.transitionDuration = `${frameDuration}ms`;
                 el.querySelector('.bar-fill').style.transitionDuration = `${frameDuration}ms`;
             });
             if (isPlaying) {
                 startGameLoop();
             }
        }

        els.playPauseBtn.addEventListener('click', () => {
            if (currentIndex >= timeline.length - 1) {
                currentIndex = 0;
            }
            isPlaying = !isPlaying;
            updatePlayButton();
            if (isPlaying) startGameLoop();
            else clearInterval(intervalId);
        });

        els.resetBtn.addEventListener('click', () => {
            pauseGame();
            currentIndex = 0;
            renderFrame();
        });

        els.timelineSlider.addEventListener('input', (e) => {
            currentIndex = parseInt(e.target.value);
            pauseGame();
            renderFrame();
        });

        els.speedSelect.addEventListener('change', (e) => {
            frameDuration = parseInt(e.target.value);
            updateTransitionSpeed();
        });

        els.toggleEditorBtn.addEventListener('click', () => {
            els.editorModal.classList.remove('hidden');
        });

        els.closeEditorBtn.addEventListener('click', () => {
            els.editorModal.classList.add('hidden');
        });

        els.saveDataBtn.addEventListener('click', () => {
            try {
                const parsed = JSON.parse(els.inputJson.value);
                const keys = Object.keys(parsed).sort();
                if (keys.length === 0) throw new Error("El JSON está vacío.");
                
                rawData = parsed;
                chartTitle = els.inputTitle.value;
                chartSubtitle = els.inputSubtitle.value;
                els.titleDisplay.innerText = chartTitle;
                els.subtitleDisplay.innerText = chartSubtitle;

                initData();
                currentIndex = 0;
                pauseGame();
                
                els.chartContainer.innerHTML = '';
                for (let key in barElements) delete barElements[key];
                
                renderFrame();

                els.errorMsg.classList.add('hidden');
                els.editorModal.classList.add('hidden');
            } catch (e) {
                els.errorMsg.innerText = "Error: " + e.message;
                els.errorMsg.classList.remove('hidden');
            }
        });

        lucide.createIcons();
        initData();
        renderFrame();

    </script>
</body>
</html>
